<!DOCTYPE html>
<html ng-app="DKPace">

	<head>
		<!-- Materialize CSS -->
		<link rel="stylesheet" href="bower_components/materialize/dist/css/materialize.min.css" media="screen,projection">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<!-- Animate.css -->
		<link rel="stylesheet" href="bower_components/animate.css/animate.min.css">

		<!-- App CSS -->
		<link rel="stylesheet" href="dkpace.css">
	</head>

	<body class="grey darken-4 calculator" ng-controller="Calculator as calculator" ng-init="calculator.setInitialVariables()">

		<div id="calculatorUI" ng-hide="calculator.configuringMobile">

			<!-- Display Fields -->
			<ul class="collection">
				<li class="collection-item" style="border-top: none;">
					<span class="item-header">Start (L=01 &ndash; L=04)</span>
					<span id="startDisplay" class="item-content">{{ (calculator.start | number) || "-" }}</span>
				</li>

				<li class="collection-item">
					<span class="item-header">Level Average (L=05 &ndash; L=21)</span>
					<span id="levelAverageDisplay" 
					      class="item-content"
					      ng-class="{ 'less-than-needed': calculator.levelAverage && calculator.levelAverage < calculator.neededAverage,
					                  'more-than-needed': calculator.levelAverage && calculator.levelAverage > calculator.neededAverage,
					                  'needed-value': calculator.levelAverage && calculator.levelAverage === calculator.neededAverage }">
					    {{ (calculator.levelAverage | number) || "-" }}
					</span>
				</li>

				<li class="collection-item">
					<span class="item-header">Needed L=05+ Average</span>
					<span id="neededAverageDisplay" class="item-content">{{ (calculator.neededAverage | number) || "-" }}</span>
				</li>

				<li class="collection-item">
					<span class="item-header">Target End of Level Score</span>
					<span id="targetScoreDisplay" class="item-content">{{ (calculator.targetScore | number) || "Waiting to enter L=05..." }}</span>
				</li>

				<li class="collection-item">
					<span class="item-header">Previous Level</span>
					<span id="previousLevelDisplay" class="item-content">{{ (calculator.previousLevel | number) || "-" }}</span>
				</li>

				<li class="collection-item">
					<span class="item-header">Current Pace</span>
					<span id="projectionDisplay" 
					      class="item-content"
					      ng-class="{ 'less-than-needed': calculator.projectedFinal && calculator.projectedFinal < calculator.inputGoal,
					                  'more-than-needed': calculator.projectedFinal && calculator.projectedFinal > calculator.inputGoal,
					                  'needed-value': calculator.projectedFinal && calculator.projectedFinal === calculator.inputGoal }">
					    {{ (calculator.projectedFinal | number) || "-" }}
					</span>
				</li>

				<li class="collection-item">
					<span class="item-header">Death Points</span>
					<span id="deathsDisplay" 
					      class="item-content" 
					      ng-class="{ 'less-than-needed': calculator.deathPoints < 28000 && calculator.start,
					                  'more-than-needed': calculator.deathPoints >= 28000 && calculator.start }">
						{{ (calculator.deathPoints | number) || "-" }} / 28,000
					</span>
				</li>

				<li class="collection-item">
					<span class="item-header">Goal</span>
					<span id="goalDisplay" class="item-content">{{ calculator.inputGoal | number }}</span>
				</li>
			</ul>

			<!-- Score and Goal Input  -->
			<div class="row">
				<form class="col s12">
					<div class="row" style="margin-bottom: 0">
						<div class="input-field col s12">
							<input id="inputScore" 
							       type="text" 
							       ng-model="calculator.inputScore"
							       ng-keyup="$event.keyCode === 13 ? calculator.submitScore() : null">
							<label for="inputScore">{{ calculator.inputScoreLabel }}</label>
						</div>
					</div>
					<div class="row" style="margin-bottom: 10px;">
						<div class="input-field col s12">
							<input id="inputGoal" type="text" ng-model="calculator.inputGoal" fcsa-number>
							<label for="inputGoal">Input Goal</label>
						</div>
					</div>
				</form>
			</div>

			<!-- Calculator Function Buttons -->
			<div class="row">
				<div class="col s12">
					<div class="row">
						<div class="col s6" style="text-align: center;">
							<a class="waves-effect waves-light btn green" 
							   data-position="top" 
							   data-delay="250"
							   data-tooltip="Submit"
							   ng-click="calculator.submitScore()">
							    Submit
							</a>
						</div>
						<div class="col s6" style="text-align: center;">
							<a class="waves-effect waves-light btn red" 
							   data-position="top"
							   data-delay="250"
							   data-tooltip="Reset"
							   ng-click="calculator.resetCalculator()">
							    Reset
							</a>
						</div>
					</div>
				</div>
			</div>

		</div>

		<!-- Library Dependencies -->
		<script src="bower_components/jquery/dist/jquery.min.js"></script>
		<script src="bower_components/materialize/dist/js/materialize.min.js"></script>
		<script src="bower_components/angular/angular.min.js"></script>
		<script src="bower_components/firebase/firebase.js"></script>
		<script src="bower_components/angularfire/dist/angularfire.min.js"></script>
		<script src="bower_components/angular-fcsa-number/src/fcsaNumber.min.js"></script>

		<!-- App Dependencies -->
		<script src="app/DKPace.module.js"></script>
		<script src="app/calculator/calculator.controller.js"></script>
		<script src="app/calculator/calculator.service.js"></script>

	</body>

</html>